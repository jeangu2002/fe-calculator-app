(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(r){if(r.ep)return;r.ep=!0;const n=i(r);fetch(r.href,n)}})();window.addEventListener("DOMContentLoaded",()=>{const operationKeys=document.querySelectorAll(".digit, .operator"),resetBtn=document.querySelector("#reset"),display=document.querySelector(".current-value"),deleteBtn=document.querySelector("#del"),equalBtn=document.querySelector("#equal"),themeSwitchers=document.querySelectorAll('.theme-slider input[type="radio"]');function getLastCharacter(){return display.textContent[display.textContent.length-1]}function updateDisplay(t,s=!1){const i=/\D$/;s?display.textContent="":i.test(getLastCharacter())&&i.test(t)&&t!==getLastCharacter()&&(display.textContent=display.textContent.slice(0,-1)),display.textContent+=t}function isTriggeredByOperatorKey(t){return t.key==="+"||t.key==="-"||t.key==="*"||t.key==="/"}function displayedValueIsZeroOrWhitespace(t){return t.textContent==="0"||t.textContent.trim()===""||t.innerHTML==="&nbsp;"}operationKeys.forEach(t=>{t.addEventListener("click",()=>{t.classList.contains("operator")&&(displayedValueIsZeroOrWhitespace(display)||getLastCharacter()===t.textContent)||updateDisplay(t.textContent)})}),deleteBtn.addEventListener("click",()=>{display.innerHTML!=="&nbsp;"&&updateDisplay(display.textContent.slice(0,-1),!0)}),equalBtn.addEventListener("click",()=>{display.innerHTML==="&nbsp;"||display.textContent.trim()===""||updateDisplay(eval(display.textContent.trimStart().replace(/x/g,"*")),!0)}),resetBtn.addEventListener("click",()=>{display.innerHTML="&nbsp;"}),window.addEventListener("keydown",e=>{const isOperatorKey=isTriggeredByOperatorKey(e);if(isOperatorKey||e.key>=0&&e.key<=9){if(isOperatorKey&&(displayedValueIsZeroOrWhitespace(display)||getLastCharacter()===e.key))return;updateDisplay(e.key)}else if(e.key==="Backspace")updateDisplay(display.textContent.slice(0,-1),!0);else if(e.key==="Enter"){if(display.innerHTML==="&nbsp;"||display.textContent.trim()==="")return;updateDisplay(eval(display.textContent.trimStart()),!0)}}),window.matchMedia("(prefers-color-scheme: dark)").matches?(document.documentElement.className="theme-3",document.querySelector("#theme-3").checked=!0):(document.documentElement.className="theme-1",document.querySelector("#theme-1").checked=!0),themeSwitchers.forEach(t=>{t.addEventListener("change",()=>{document.documentElement.className=t.value})})});
